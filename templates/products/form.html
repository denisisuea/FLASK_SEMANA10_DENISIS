{% extends "base.html" %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="page-section">
  <form method="post" class="form-card">
    <h1>{{ title }}</h1>

    <!-- Campo: Nombre -->
    <div class="form-group">
      <label for="nombre">Nombre</label>
      <input
        type="text"
        id="nombre"
        name="nombre"
        class="input"
        value="{{ producto['nombre'] if producto else '' }}"
        required
        autocomplete="off"
      >
    </div>

    <!-- Campo: Cantidad -->
    <div class="form-group">
      <label for="cantidad">Cantidad</label>
      <input
        type="number"
        id="cantidad"
        name="cantidad"
        class="input"
        value="{{ producto['cantidad'] if producto else '' }}"
        required
      >
    </div>

    <!-- Campo: Precio -->
    <div class="form-group">
      <label for="precio">Precio</label>
      <input
        type="number"
        step="0.01"
        id="precio"
        name="precio"
        class="input"
        value="{{ producto['precio'] if producto else '' }}"
        required
      >
    </div>

    <!-- Campo: Descripción -->
    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <textarea
        id="descripcion"
        name="descripcion"
        class="input"
        required
      >{{ producto['descripcion'] if producto else '' }}</textarea>
    </div>

    <!-- Campo: Categoría -->
    <div class="form-group">
      <label for="categoria_nombre">Categoría</label>
      <select id="categoria_nombre" name="categoria_nombre" class="input" required>
        <option value="">-- Selecciona --</option>
        {% for nombre in categorias_ui %}
        <option value="{{ nombre }}" {% if producto and producto['categoria_nombre'] == nombre %}selected{% endif %}>
          {{ nombre|capitalize }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Campo: Marca -->
    <div class="form-group">
      <label for="marca">Marca</label>
      <select id="marca" name="marca" class="input" required>
        <option value="">-- Selecciona --</option>
        {% for m in marcas_ui %}
        <option value="{{ m }}" {% if producto and producto['marca'] == m %}selected{% endif %}>
          {{ m }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Botones -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Guardar</button>
      <a href="{{ url_for('listar_productos') }}" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}
